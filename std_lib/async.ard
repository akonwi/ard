extern fn sleep(ms: Int) Void = "Sleep"

struct Fiber {
  // pointer to *WaitGroup
  wg: Dynamic
}

private extern fn wait_for(wg: Dynamic) Void = "WaitFor"

impl Fiber {
  fn join() {
    wait_for(@wg)
  }
}

fn start(do: fn() Void) Fiber {
  panic("Unreachable: async::start() is part of the compiler.")
}
